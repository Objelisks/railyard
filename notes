regl for three d rendering
choo because trains and also for ui
peerjs for networking

something for tiles
something for animation??
something for game state?

milestones

index.html
script.js
serve libraries
set up camera params
render a box
render a train
i think i need browserify, BUT just for libraries
initial network connections
simple input
simple ui
connect tracks
figure out switches (disable a segment in a direction?) 
sync tracks
sync positions
sync movement
selecting trains
move a train from x to yz
render a track
pull request esm modules for peerjs and choo https://github.com/rollup/rollup/wiki/pkg.module
pbr shader


drawing tracks:
sqrt(2)*side/4 for 90 degree curve?
snap endpoints based on closest other endpoints
track options: straight, 45, 90, S, switch, quad bezier
drag a line and bend it
revisit whether i wanna keep doing quadratic or use cubic to make it easier to match angles


today:
X fix choo routing issue
X clicking ground
X drawing tracks dynamically
X camera controls
X snap to track endpoints
X use endpoint tangents
X creating switches
X move debug stuff to separate file
X switch to cubic bezier
X fix switches
X fix moveBogie
refactoring pass
reorder tracks in turnout based on arbitrary line intersection through curves
build a module
saving / exporting
loading


throttled log
sync networking on regl tick
render canvas from choo to use state
blend avg of player updates but rewind and extrapolate, window of 10 updates (60 frames)
static modules??



gameplay:
    choose a room name
    you're given a bunch of random track module tiles
    place the tiles to create a layout
    random exits from your layout are joined to the common layout (random roundabout)
    speed control
        speed when not actively controlled?
        interaction with collision
    switch control
        just a direction indicator that automatically flips switches in front of your train
        click on switches to toggle them
    train control
        multiple trains?
        control transfer btwn players?
    camera control
        kite
        conductor
        bird
        tower


architecture:
canvas which draws the trains
overlay using choo, which:
    names the room for people to join (use signalhub app name)
    create new train?
    create new track module

progressive state thing
dialog box, dropshadow
    text box for room name -> validate text
    ok button -> toggle based on text

in game
    train speed knob
        project mouse pos along tangent of first click to spin knob
    leave room button
    reset train button
what if the first part of joining a room is playing carcassone
shader noise fade in
dynamic lines using preallocated buffer
make trains tilt when they turn


models:
single color via vertex colors
start off with everything being a colored box
uvs on palette texture
engine, several cars, tracks, trees, rocks, water, station, station equipment, signals, terrain
animation? probably not

ambient occlusion and hella tilt shift



networking:
first player starts a room by putting in a name
everyone else connects to that name



gameplay:

start off with a loop, each player can connect their railyard to the loop
stations that will load cars with resource
stations that will unload cars of resource
train whistle

hook it up to midi input so we can use knobs!!!


documentation:
https://github.com/choojs/choo#api
https://github.com/regl-project/regl/blob/gh-pages/API.md
http://glmatrix.net/docs/
http://pomax.github.io/bezierjs/
https://github.com/mourner/rbush
